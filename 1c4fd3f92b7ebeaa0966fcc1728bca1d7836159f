{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "5ab851e0_b10c0b92",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 16,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-16T14:38:09Z",
      "side": 1,
      "message": "I think that this is a misleading description, but maybe I\u0027m wrong.\n\nI re-read RFC 8349, and now I know that \"direct\" refers to a psuedo-protocol which should be used to mark routes which are auto-generated by the kernel for directly reachable networks. So, if you add an address of, say, 10.1.2.3/24 via the ietf-interfaces model, there will be a \"direct route\" for 10.1.2.0/24.\n\nIn our case, this is something that the Linux kernel will do for us, and we do not have to (and should not have to) add that as an explicit configuration. Our current code already supports that by testing for RT_SCOPE_LINK, and returning \"direct\" appropriately.\n\nHowever, the RFC also says that:\n\n\u003e Every implementation of the core routing data model MUST provide\nexactly one instance of the \"direct\" pseudo-protocol type.\n\nMaybe that means that we should allow a `/ietf:routing/control-plane-protocols[type\u003ddirect][name\u003d\"whatever\"]` container (or maybe even require an \"undeletable\" container like this one)? But considering that this is not listed in the [example data](https://datatracker.ietf.org/doc/html/rfc8349#appendix-E), I guess that\u0027s not needed.",
      "range": {
        "startLine": 15,
        "startChar": 51,
        "endLine": 16,
        "endChar": 13
      },
      "revId": "1c4fd3f92b7ebeaa0966fcc1728bca1d7836159f",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b399c20f_5a05a292",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 22,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-16T14:38:09Z",
      "side": 1,
      "message": "We can also have a single function which is registered twice, once for modifications of the `ietf-interfaces`, and the second time for `ietf-routing` modules, along with the `SR_SUBSCR_CHANGE_ALL_MODULES` flag. This function will then walk all the defined interfaces, and fetch configuration from both of these modules, and generate the config files on disk. Then you can resurrect the other patch which you wrote and which prevented the service restart when there are no changes to on-disk files. So the first invocation of that function will write correct data to disk, and the second one will be effectively a no-op.\n\nHmm, I wonder how the current implementation actually works. When the CB is invoked for the `ietf-interfaces` module, the session should *not* have access to the routing info, and when it\u0027s executed for the `ietf-routing`, the session should not see the interfaces. Except that it *must* see these interfaces because of the leafrefs from the routing module, *but* I still think that the current code probably creates some incomplete configuraiton (without the routing info) first, and then these are updated with the routing info in a second step. Could you maybe check for the \"correct expected content of the .network files\" from within the actual mock callbacks?\n\n*think* that the current implementation (without SR_SUBSCR_CHANGE_ALL_MODULES) might be actually wrong;",
      "range": {
        "startLine": 20,
        "startChar": 38,
        "endLine": 22,
        "endChar": 27
      },
      "revId": "1c4fd3f92b7ebeaa0966fcc1728bca1d7836159f",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a09f3ad_06d68a51",
        "filename": "src/network/IETFInterfacesConfig.cpp",
        "patchSetId": 5
      },
      "lineNbr": 131,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-16T14:38:09Z",
      "side": 1,
      "message": "nit: please wrap this line",
      "revId": "1c4fd3f92b7ebeaa0966fcc1728bca1d7836159f",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b82438e9_0b413fe5",
        "filename": "src/network/IETFInterfacesConfig.cpp",
        "patchSetId": 5
      },
      "lineNbr": 137,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-16T14:38:09Z",
      "side": 1,
      "message": "please add a constexpr prefix for this, and use it everywhere in this file",
      "range": {
        "startLine": 137,
        "startChar": 53,
        "endLine": 137,
        "endChar": 164
      },
      "revId": "1c4fd3f92b7ebeaa0966fcc1728bca1d7836159f",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f6d974f_b3a19381",
        "filename": "tests/sysrepo_interfaces-systemd-networkd.cpp",
        "patchSetId": 5
      },
      "lineNbr": 514,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-16T14:38:09Z",
      "side": 1,
      "message": "to provide some context to my comment for the commit message where I talk about callbacks -- I think that if you add a LR_SIDE_EFFECT which would do a REQUIRE_NETWORK_CONFIGURATION(...) from the first CB, that one should not see any routes.",
      "range": {
        "startLine": 513,
        "startChar": 0,
        "endLine": 514,
        "endChar": 98
      },
      "revId": "1c4fd3f92b7ebeaa0966fcc1728bca1d7836159f",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b3563de6_623fe050",
        "filename": "yang/czechlight-network@2025-06-06.yang",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-16T14:38:09Z",
      "side": 1,
      "message": "Please also `deviate not-supported` the `ietf-routing:routing/ribs/active-route`",
      "revId": "1c4fd3f92b7ebeaa0966fcc1728bca1d7836159f",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68"
    }
  ]
}