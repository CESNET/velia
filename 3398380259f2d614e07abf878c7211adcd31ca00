{
  "comments": [
    {
      "key": {
        "uuid": "d707ff49_d509f552",
        "filename": "src/Factory.cpp",
        "patchSetId": 11
      },
      "lineNbr": 15,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-12-02T15:42:48Z",
      "side": 1,
      "message": "How do you plan to plug this into systemd? Our system uses the same rootfs image for all models that are based on a clearfog SBC, the only way to tell a line degree ROADM from an inline amp is the czechlight\u003d... kernel command line parameter. The majority of differences is in the optics, true, but still, the sdn-roadm-line has a certain daughter PCB which is missing on any other device, and that PCB has an EEPROM with a serial number. It would be great to export that S/N to the owner via NETCONF.\n\nHere are the appliance models (i.e., values for czechlight\u003d...) that we\u0027re using today:\n- sdn-roadm-line\n- sdn-roadm-add-drop\n- sdn-roadm-coherent-a-d\n- sdn-inline\n\nAlso, by the end of the year we\u0027re gonna have some revised PCBs which will be (eventually) replaced within all of our prototypes, and these new PCBs will bring new addresses for stuff below sysfs/hwmon. What is important for velia is that \"sdn-roadm-line\" has one additional internal PCB, which has an EEPROM with a factory-burned serial number, and this serial number should be exported to the user via sysrepo. Please feel free to propose a change here in velia *and* in br2-extenral which makes this work.",
      "range": {
        "startLine": 15,
        "startChar": 26,
        "endLine": 15,
        "endChar": 34
      },
      "revId": "3398380259f2d614e07abf878c7211adcd31ca00",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0d217a6_d59052c4",
        "filename": "src/Factory.cpp",
        "patchSetId": 11
      },
      "lineNbr": 15,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2020-12-02T17:38:17Z",
      "side": 1,
      "message": "Ok, I have changed the \"clearfog\" into \"sdn-inline\" because that is the one I have now. If these boards differ even in these HW specs, then we have to handle it here (probably later, not now; a common part for each sdn-* and a special line of code for sdn-roadm-line\u0027s EEPROM). Also we probably have to specify something like\n\n --appliance\u003d\"$(grep -o \u0027czechlight\u003d[A-z-]*\u0027 /proc/cmdline | cut -d\u0027\u003d\u0027 -f2)\"\n\nin the velia.service. I do not feel like we need a separate service for every model like in cla-sysrepo (is there a better way how to parse kernel cmdline args? -- but that is probably a discussion for the br2-external patch)\n\nI\u0027m not a fan of introducing a special flag for a roadm-line only. So let the factory function know that all these 4 models exist and use as much common code as we can.",
      "parentUuid": "d707ff49_d509f552",
      "range": {
        "startLine": 15,
        "startChar": 26,
        "endLine": 15,
        "endChar": 34
      },
      "revId": "3398380259f2d614e07abf878c7211adcd31ca00",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4abf031c_ddba12d3",
        "filename": "src/Factory.cpp",
        "patchSetId": 11
      },
      "lineNbr": 15,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2020-12-02T19:42:43Z",
      "side": 1,
      "message": "By the way, we should decide who will be the maintainer of the topmost (ne) element of the tree -- Will it be cla-sysrepod or veliad? I believe you have said it should be cla-sysrepo, right? I think your arguments were that cla-sysrepo is designed \"specifically for this hw and it should know more about it\".\nIf this still holds then there is (as of now) no difference between all the sdn-* models. and also I have to remove line 23 from this file",
      "parentUuid": "a0d217a6_d59052c4",
      "range": {
        "startLine": 15,
        "startChar": 26,
        "endLine": 15,
        "endChar": 34
      },
      "revId": "3398380259f2d614e07abf878c7211adcd31ca00",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa9c7e48_eb505515",
        "filename": "src/Factory.cpp",
        "patchSetId": 11
      },
      "lineNbr": 15,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-12-17T10:02:04Z",
      "side": 1,
      "message": "Just to make Gerrit happy -- this is implemented in the follow-up patches.",
      "parentUuid": "4abf031c_ddba12d3",
      "range": {
        "startLine": 15,
        "startChar": 26,
        "endLine": 15,
        "endChar": 34
      },
      "revId": "3398380259f2d614e07abf878c7211adcd31ca00",
      "serverId": "e32f8df8-3db0-4f76-a6c6-fe9d6e69dd68",
      "unresolved": false
    }
  ]
}